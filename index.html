<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>כרך ב' - מד"ר מסדר גבוה - טכניקות פתרון</title>
  <style>
    :root{
      --edge:#6b7280;
      --lvl1:#a78bfa;
      --lvl2:#60a5fa;
      --lvl3:#34d399;
      --lvl4:#22d3ee;
      --txt:#e5e7eb;
      --w:200px;           /* רוחב צומת */
      --pad:12px;
      --gap:60px;          /* ריווח אופקי בין עמודות */
      --v-gap:50px;        /* ריווח אנכי בין שכבות/פריטים */
      --radius:16px;
      --fs:14px;
      --shadow:0 6px 18px rgba(0,0,0,.25);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:"Rubik","Segoe UI",Tahoma,Arial,Helvetica,sans-serif;
      background:linear-gradient(135deg,#0f172a 0%,#111827 60%,#0b1226 100%); color:var(--txt);
      padding:0;
    }

    .wrap{width:100vw; height:100vh; display:flex; flex-direction:column; gap:8px}
    .toolbar{padding:10px 18px; display:flex; justify-content:space-between; align-items:center}
    .title{font-weight:700}

    .stage{flex:1; margin:0 18px 18px; border-radius:18px; overflow:auto;
      background:rgba(11,18,38,.85); border:1px solid #1f2937; box-shadow:0 12px 32px rgba(0,0,0,.25);
      position:relative; padding:30px;}
    .canvas{position:relative; isolation:isolate; padding:10px;}
    .edges{position:absolute; inset:0; z-index:0; pointer-events:none}

    .layer{position:relative; display:flex; justify-content:center; gap:var(--gap); margin-bottom:var(--v-gap); z-index:1}
    .layer.grid6{display:grid; grid-template-columns:repeat(6, var(--w)); justify-content:center; gap:var(--gap); z-index:1}

    .node{
      position:relative; z-index:2;  /* חשוב: הצמתים מעל הקווים */
      width:var(--w); padding:var(--pad); border-radius:var(--radius);
      background:#0b1226; color:var(--txt); text-align:center; font-size:var(--fs);
      box-shadow:var(--shadow);
    }
    .lvl1{background:linear-gradient(135deg,#6d28d9,#8b5cf6)}
    .lvl2{background:linear-gradient(135deg,#2563eb,#60a5fa)}
    .lvl3{background:linear-gradient(135deg,#059669,#34d399)}
    .lvl4{background:linear-gradient(135deg,#0891b2,#22d3ee); color:#042430; font-size:13px;}
    a.node{text-decoration:none; display:block}

    .subcol{display:flex; flex-direction:column; align-items:center; gap:10px}
    .subcol .node.lvl4{margin-top:6px}
    a.node {
  text-decoration: underline;   /* קו תחתון לקישורים */
  cursor: pointer;              /* יד על hover */
}
a.node:hover {
  text-decoration: none;        /* הסרת קו כשעוברים עם העכבר */
  filter: brightness(1.1);      /* הדגשה עדינה */
}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="toolbar">
      <div class="title">כרך ב' - מד"ר מסדר גבוה - טכניקות פתרון</div>
    </div>

    <div class="stage">
      <div class="canvas" id="canvas">
        <svg class="edges" id="edges" xmlns="http://www.w3.org/2000/svg"></svg>

        <!-- שכבה 1 -->
        <div class="layer" id="L1">
          <div class="node lvl1" id="root">כרך ב' – מד"ר מסדר גבוה – טכניקות פתרון</div>
        </div>

        <!-- שכבה 2 -->
        <div class="layer" id="L2">
          <div class="node lvl2" id="chap2">פרק 2 – סדר שני</div>
          <div class="node lvl2" id="chap3">פרק 3 – סדר גבוה</div>
        </div>

        <!-- שכבה 3 + שכבה 4 (8 בנים לכל נכד) -->
        <div class="layer grid6" id="L3">
          <div class="subcol" id="col_c2_homo_const">
            <div class="node lvl3" id="c2_homo_const">מד"ר לינארית הומוגנית – מקדמים קבועים</div>
            <a href="https://opal.openu.ac.il/mod/combopage/view.php?id=6756889" class="node lvl4" id="c2_hc_i1">יחידות הלימוד</a>
            <a href="https://opal.openu.ac.il/mod/combopage/view.php?id=6756892" class="node lvl4" id="c2_hc_i2">דרך הפתרון</a>
            <a href="https://opal.openu.ac.il/mod/combopage/view.php?id=6756855&from=topNext" class="node lvl4" id="c2_hc_i3">טבלה 2.4.2</a>
            <a href="https://opal.openu.ac.il/mod/combopage/view.php?id=6756856&from=topNext" class="node lvl4" id="c2_hc_i4">דוגמאות</a>
            <a href="https://opal.openu.ac.il/mod/combopage/view.php?id=6827875&from=topNext" class="node lvl4" id="c2_hc_i5">דוגמה - משוואת אוילר </a>
          </div>

          <div class="subcol" id="col_c2_inh_const">
            <div class="node lvl3" id="c2_inh_const">אי־הומוגנית – מקדמים קבועים</div>
            <a href="#" class="node lvl4" id="c2_ic_i1">פריט 1</a>
            <a href="#" class="node lvl4" id="c2_ic_i2">פריט 2</a>
            <a href="#" class="node lvl4" id="c2_ic_i3">פריט 3</a>
            <a href="#" class="node lvl4" id="c2_ic_i4">פריט 4</a>
            <a href="#" class="node lvl4" id="c2_ic_i5">פריט 5</a>
            <a href="#" class="node lvl4" id="c2_ic_i6">פריט 6</a>
            <a href="#" class="node lvl4" id="c2_ic_i7">פריט 7</a>
            <a href="#" class="node lvl4" id="c2_ic_i8">פריט 8</a>
          </div>

          <div class="subcol" id="col_c2_inh_cont">
            <div class="node lvl3" id="c2_inh_cont">אי־הומוגנית – מקדמים רציפים</div>
            <a href="#" class="node lvl4" id="c2_ir_i1">פריט 1</a>
            <a href="#" class="node lvl4" id="c2_ir_i2">פריט 2</a>
            <a href="#" class="node lvl4" id="c2_ir_i3">פריט 3</a>
            <a href="#" class="node lvl4" id="c2_ir_i4">פריט 4</a>
            <a href="#" class="node lvl4" id="c2_ir_i5">פריט 5</a>
            <a href="#" class="node lvl4" id="c2_ir_i6">פריט 6</a>
            <a href="#" class="node lvl4" id="c2_ir_i7">פריט 7</a>
            <a href="#" class="node lvl4" id="c2_ir_i8">פריט 8</a>
          </div>

          <div class="subcol" id="col_c3_homo_const">
            <div class="node lvl3" id="c3_homo_const">מד"ר לינארית הומוגנית – מקדמים קבועים (n)</div>
            <a href="#" class="node lvl4" id="c3_hc_i1">פריט 1</a>
            <a href="#" class="node lvl4" id="c3_hc_i2">פריט 2</a>
            <a href="#" class="node lvl4" id="c3_hc_i3">פריט 3</a>
            <a href="#" class="node lvl4" id="c3_hc_i4">פריט 4</a>
            <a href="#" class="node lvl4" id="c3_hc_i5">פריט 5</a>
            <a href="#" class="node lvl4" id="c3_hc_i6">פריט 6</a>
            <a href="#" class="node lvl4" id="c3_hc_i7">פריט 7</a>
            <a href="#" class="node lvl4" id="c3_hc_i8">פריט 8</a>
          </div>

          <div class="subcol" id="col_c3_inh_const">
            <div class="node lvl3" id="c3_inh_const">אי־הומוגנית – מקדמים קבועים (n)</div>
            <a href="#" class="node lvl4" id="c3_ic_i1">פריט 1</a>
            <a href="#" class="node lvl4" id="c3_ic_i2">פריט 2</a>
            <a href="#" class="node lvl4" id="c3_ic_i3">פריט 3</a>
            <a href="#" class="node lvl4" id="c3_ic_i4">פריט 4</a>
            <a href="#" class="node lvl4" id="c3_ic_i5">פריט 5</a>
            <a href="#" class="node lvl4" id="c3_ic_i6">פריט 6</a>
            <a href="#" class="node lvl4" id="c3_ic_i7">פריט 7</a>
            <a href="#" class="node lvl4" id="c3_ic_i8">פריט 8</a>
          </div>

          <div class="subcol" id="col_c3_inh_cont">
            <div class="node lvl3" id="c3_inh_cont">אי־הומוגנית – מקדמים רציפים (n)</div>
            <a href="#" class="node lvl4" id="c3_ir_i1">פריט 1</a>
            <a href="#" class="node lvl4" id="c3_ir_i2">פריט 2</a>
            <a href="#" class="node lvl4" id="c3_ir_i3">פריט 3</a>
            <a href="#" class="node lvl4" id="c3_ir_i4">פריט 4</a>
            <a href="#" class="node lvl4" id="c3_ir_i5">פריט 5</a>
            <a href="#" class="node lvl4" id="c3_ir_i6">פריט 6</a>
            <a href="#" class="node lvl4" id="c3_ir_i7">פריט 7</a>
            <a href="#" class="node lvl4" id="c3_ir_i8">פריט 8</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const edges = document.getElementById('edges');
    const canvas = document.getElementById('canvas');

    function collectPairs(){
      const pairs = [
        ['root','chap2'], ['root','chap3'],
        ['chap2','c2_homo_const'], ['chap2','c2_inh_const'], ['chap2','c2_inh_cont'],
        ['chap3','c3_homo_const'], ['chap3','c3_inh_const'], ['chap3','c3_inh_cont']
      ];
      const map = {
        'c2_homo_const':'c2_hc',
        'c2_inh_const':'c2_ic',
        'c2_inh_cont':'c2_ir',
        'c3_homo_const':'c3_hc',
        'c3_inh_const':'c3_ic',
        'c3_inh_cont':'c3_ir'
      };
      Object.entries(map).forEach(([parent, base]) => {
        for(let i=1;i<=8;i++){
          pairs.push([parent, `${base}_i${i}`]);
        }
      });
      return pairs;
    }

    function linePath(from, to){
      const r1 = from.getBoundingClientRect();
      const r2 = to.getBoundingClientRect();
      const rc = canvas.getBoundingClientRect();

      const x1 = (r1.left + r1.width/2) - rc.left;
      const y1 = (r1.bottom) - rc.top;
      const x2 = (r2.left + r2.width/2) - rc.left;
      const y2 = (r2.top) - rc.top;

      const mid = (y1 + y2) / 2;
      const c1x = x1, c1y = mid;
      const c2x = x2, c2y = mid;
      return `M ${x1},${y1} C ${c1x},${c1y} ${c2x},${c2y} ${x2},${y2}`;
    }

    function drawEdges(){
      const w = Math.max(canvas.scrollWidth, canvas.clientWidth);
      const h = Math.max(canvas.scrollHeight, canvas.clientHeight);
      edges.setAttribute('width', w);
      edges.setAttribute('height', h);
      edges.innerHTML = '';

      collectPairs().forEach(([a,b]) => {
        const from = document.getElementById(a);
        const to   = document.getElementById(b);
        if(!from || !to) return;
        const path = document.createElementNS('http://www.w3.org/2000/svg','path');
        path.setAttribute('d', linePath(from,to));
        path.setAttribute('fill','none');
        path.setAttribute('stroke','var(--edge)');
        path.setAttribute('stroke-width','2');
        path.setAttribute('stroke-linecap','round');   // חיבור נקי
        path.setAttribute('stroke-linejoin','round');  // פינות רכות
        path.setAttribute('vector-effect','non-scaling-stroke');
        path.setAttribute('opacity','0.9');
        edges.appendChild(path);
      });
    }

    window.addEventListener('resize', drawEdges);
    new ResizeObserver(drawEdges).observe(canvas);
    window.addEventListener('load', () => setTimeout(drawEdges, 0));
  </script>
</body>
</html>
